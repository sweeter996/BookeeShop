function _CPA(e){var t=this;document.location.host.split(".");t._domain=document.location.host,t._domain.indexOf("vccloud.vn")>=0&&(t._domain=".vccloud.vn"),t.getItemId(document.location.pathname),void 0===(e=void 0===e?{}:e).rtg_id&&(e.rtg_id=0),t.cpabd_param=e,t.cpabd_logged=!1}window.ADS_CPA_CHECKER={cpa:!0,cookies:{tid:"__tid",tp:"__tpn",iid:"__iid",src:"__src",su:"__su",st:"__st",v:"__v",sv:"__sv",domain:"__d"}},_CPA.prototype.getRandom=function(){return Math.floor(1e3*Math.random()+1)},_CPA.prototype.getItemId=function(e){var t=this,o=null;if(null==e||"/"==e)return o;switch(t._domain){case"www.lazada.vn":document.getElementById("pdtsku")&&(o=(o=document.getElementById("pdtsku").innerHTML).replace(/[\r\n]+/g,""))}return null!=o&&""!=o&&t.setCookie(window.ADS_CPA_CHECKER.cookies.v,o,30,t._domain),o},_CPA.prototype.setValue=function(e,t){var o=this;return o.cpabd_param.v=e+"###"+t,o.setCookie(window.ADS_CPA_CHECKER.cookies.v,o.cpabd_param.v,30,o._domain),o},_CPA.prototype.getUId=function(){var e="-1";try{e=ADM_AdsTracking.get("__uid")}catch(e){}return e},_CPA.prototype.getUIdDomain=function(){var e=-1;try{e=void 0!==(e=localStorage.__uidac)?e:-1}catch(e){}return e},_CPA.prototype.init=function(){var e=this,t=e.cpabd_param,o=e.getParam("cpa_tid"),i=e.getCookie("__tid"),a=e.getCookie("__iid");if("undefined"==i&&(i="",e.setCookie("__tid","",30,e._domain)),""!=o){i=o,e.setCookie("__tid",o,30,e._domain);var n=parseInt(e.getParam("tpn"));""!=(n=isNaN(n)?-1:n)&&e.setCookie("__tpn",n,30,e._domain);var d=e.getParam("ma");""!=d&&null!=d&&e.setCookie("__ma",d,30,e._domain)}var c=0;c="undefined"!=typeof _CPA_CONVERSION_PAGE?_CPA_CONVERSION_PAGE:c,t.tid=i,t.s=void 0!==t.s?t.s:c,t.iid=void 0!==t.iid?t.iid:a,"undefined"!=a&&""!=a||e.setCookie("__iid",t.iid,30,e._domain);t.st=void 0!==t.st?t.st:-1,e.cpabd_param=t},_CPA.prototype.getDomainReferer=function(){var e=this,t=e.getParam("dmn");return""!=t?e.setCookie("__d",t,30,e._domain):t=e.getCookie("__d"),""!=t?t:-1},_CPA.prototype.getParam=function(e){var t="";return(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))&&(t=decodeURIComponent(e[1])),t},_CPA.prototype.getCookie=function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},_CPA.prototype.setCookie=function(e,t,o,i){var a=new Date;a.setDate(a.getDate()+o),document.cookie=e+"="+escape(t)+(null==o?"":";path=/;domain="+i+";expires="+a.toUTCString())},_CPA.prototype.isMobile=function(){var e=this,t=window.ADS_CPA_CHECKER.cookies.src;return"MOB"==e.getCookie(t)},_CPA.prototype.getType=function(){var e=this,t=parseInt(e.getCookie("__tpn")),o=-1;switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:o=t}return o},_CPA.prototype.getProductType=function(){var e=this,t=parseInt(e.getCookie("__tpn"));return isNaN(t)||""==t?-1:t},_CPA.prototype.send=function(e){(new Image).src=e},_CPA.prototype.start=function(e){var t=this,o=t.cpabd_param,e=void 0===e||1==e?1:0,i="";void 0!==o.iid&&null!=o.iid&&(i=o.iid),""!=i&&t.setCookie("__iid",o.iid,30,t._domain);var a=new RegExp("^[0-9a-zA-Z-]+$");if(""!=o.tid&&0==a.test(o.tid))return!1;o.tid=""==o.tid?"-1":o.tid;var n=document.location.href;n=(n=n.replace("&cpa_tid="+o.tid,"")).replace("cpa_tid="+o.tid,"");var d="//lg1.logging.admicro.vn/cpa2?tid="+o.tid+"&path="+encodeURIComponent(n);1==t.getCookie(window.ADS_CPA_CHECKER.cookies.su)&&(o.s=1),void 0!==o.s&&o.s>=0&&(d+="&success="+encodeURIComponent(o.s),t.setCookie(window.ADS_CPA_CHECKER.cookies.su,o.s,30,t._domain));var c=t.getCookie(window.ADS_CPA_CHECKER.cookies.v);""!=c&&null!=c&&(o.value=c),void 0!==o.value&&null!=o.value&&null!=i&&(i+="@@@"+o.value.replace(/\t/g," ")),""!=i&&(d+="&iid="+encodeURIComponent(i)),d+="&src="+t.getType(),d+="&ng="+t.getUId(),d+="&sdmn="+t.getDomainReferer(),d+="&dg="+t.getUIdDomain(),1==e&&(1==o.s&&t.setCookie(window.ADS_CPA_CHECKER.cookies.su,"",-30,t._domain),1==o.s&&t.setCookie(window.ADS_CPA_CHECKER.cookies.v,"",-30,t._domain),t.send(d))},_CPA.prototype.setStepValue=function(e){var t=this;return t.cpabd_param.step_value=e,t.setCookie(window.ADS_CPA_CHECKER.cookies.sv,t.cpabd_param.step_value,30,t._domain),t},_CPA.prototype.step=function(e){var t=this,o=t.cpabd_param,e=void 0===e||1==e?1:0,i=t.getCookie(window.ADS_CPA_CHECKER.cookies.st);if(o.st=i>0&&""!=i?i:o.st,0==e)(i=void 0!==o.st?o.st:-1)>0&&t.setCookie(window.ADS_CPA_CHECKER.cookies.st,i,30,t._domain),void 0!==o.step_value&&""!=o.step_value&&t.setCookie(window.ADS_CPA_CHECKER.cookies.sv,o.step_value,30,t._domain);else if(1==e&&o.st>0){new RegExp("^[0-9a-zA-Z-]+$");o.tid=""==o.tid?"-1":o.tid;var a=document.location.href,n="";a=(a=a.replace("&cpa_tid="+o.tid,"")).replace("cpa_tid="+o.tid,"");var d="//lg1.logging.admicro.vn/cpa2?tid="+o.tid+"&path="+encodeURIComponent(a)+"&success=2";void 0!==o.iid&&null!=o.iid&&(n=o.iid);var c=t.getCookie(window.ADS_CPA_CHECKER.cookies.sv);""!=c&&null!=c&&(o.step_value=c),void 0!==o.step_value&&null!=o.step_value&&null!=n&&(n+="@@@"+o.step_value.replace(/\t/g," ")),""!=n&&(d+="&iid="+encodeURIComponent(n)),d+="&src="+t.getType(),d+="&sdmn="+t.getDomainReferer(),d+="&dg="+t.getUIdDomain(),d+="&st="+o.st,t.send(d),i>0&&t.setCookie(window.ADS_CPA_CHECKER.cookies.st,"",-30,t._domain),t.setCookie(window.ADS_CPA_CHECKER.cookies.sv,"",-30,t._domain)}},_CPA.prototype.cleanURL=function(e){return e.replace(/[?&]+([^=&]*)[=]*([^&]*)/gi,"")},_CPA.prototype.retargetingCreate=function(e,t){if(void 0===e||""==e)return!1;var o=this,i=void 0===t?0:parseInt(t),a={url:encodeURIComponent(document.location.href),ref:encodeURIComponent(document.referrer),iid:encodeURIComponent(e),tp:encodeURIComponent(o.getProductType()),rtg_id:i},n="//lg1.logging.admicro.vn/rtg_bn?url="+a.url+"&rf="+a.ref+"&a="+a.iid+"&b="+a.tp+"&c="+a.rtg_id;o.send(n)};var cpabd_param=void 0===cpabd_param?{}:cpabd_param,_cpabd=new _CPA(cpabd_param);_cpabd.init(),_cpabd.start(),_cpabd.step(),_cpabd.retargetingCreate(_cpabd.cpabd_param.iid,_cpabd.cpabd_param.rtg_id),window.addEventListener?window.addEventListener("hashchange",function(){_cpabd.retargetingCreate(_cpabd.cpabd_param.iid,_cpabd.cpabd_param.rtg_id)},!1):window.attachEvent&&window.attachEvent("onhashchange",function(){_cpabd.retargetingCreate(_cpabd.cpabd_param.iid,_cpabd.cpabd_param.rtg_id)},!1);